# 展示组件 & 容器组件
原文链接:[Presentional and Container Components](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0)
当我写React app的时候我发现一个非常有用的建艺模型. 如果你在使用React期间,也许已经发现了[这篇文章](http://facebook.github.io/react/blog/2015/03/19/building-the-facebook-news-feed-with-relay.html),但是我想补充几点.

如果你将你的组件分成两类会跟容易重用和理解其中的原理.我称这两类组件为Container组件和Presentional组件.但是我也听过 *Fat & Skinny*,*Smart & Dumb*,*Stateful & Pure*,*Screens & Components*,etc. 他们不完全相同,但是核心思想是一样的.

#### 展示组件:
1. 展示组件只关心组件的样子.(这里的thing,我认为是组件)
2. 展示组件可以包含展示和容器子组件这两者在里面.并且一般都拥有一些DOM标签和各自的样式.
3. 经常允许使用*this.props.children*来包含组件.
4. 在嵌套app都是独立的,没有依赖的.
5. 不会指定data如何被加载或者如何变化.
6. 只能经由*props*接收data和回调函数.
7. 极少拥有自己的state(如果有,也是UI state,而不是date)
8. 除非需要state,生命周期钩子或者性能优化,展示组件都应该使用函数式编程.
9. 栗子: 页面,工具栏,历史,用户信息,列表.

#### 容器组件:
1. 只关心组件如何工作.
2. 也可以包含展示和容器组件作为子组件.但是一般不会拥有DOM标签,除了包含该容器组件的`<div>`.也不会拥有自己的样式.
3. 提供data和行为给展示组件和容器组件.
4. 调用Flux的action,提供给展示组件作为回调函数.
5. 往往是有状态的,因为他们倾向于充当数据源.
6. 一般由高阶组件(如React-Redux的*connect()*)生成.
7. 栗子:用户页面,用户工具栏,历史容器,用户跟踪列表.

我把这两种组件放在不同的文件夹中,可以更清楚的区分他们.

### 这种方法的好处
1. 更好的分离关注点.你应该通过编写组件这种方式来更好的了解你的app和UI
2. 更好的重用性,你可以在完全不同的数据源中使用同样的展示组件,并且可以将展示组件变成另外的容器组件,在以后重用他们.
3. 组件的本质就是你的APP的*调色板*,你可以将他们放在一个单独的页面中,让设计师调整他们所有的变化,而不用碰触app的逻辑.You can run screenshot regression tests on that page.(这句不太懂什么叫'截屏回归测试')
4. 迫使你提取`布局组件` 例如,工具栏,页面,etc.并且使用`this.props.children`来代替重复的组件在一些容器组件中.

**记住,组件不必生成DOM,他们只需要在UI关注点提供组合和边界(Remember, components don’t have to emit DOM. They only need to provide composition boundaries between UI concerns.其实没读懂....)**


### 什么时候去引用容器组件?

我建议你首先用展示组件去构建你的APP,最终你会意识到你向中间组件传入了太多的`props`. 当你注意到一些组件在接收到`props`后没有去使用这些`props`,只是让它们(`props`)向下传递,而且有时候子组件需要更多的数据时,你不得不重新调整这些中间件,这就是一个引入一个容器组件的好时机. 这种方式可以让你获取数据并且将`props`传递给子组件,而且不会在中间件树上负载一些无关联的组件.

这是一个正在进行的重构过程,所以不要尝试一次到位.当你尝试这种模型时,你将会提高何时引用容器组件的直觉.

### 其他二分法(dichotomy)
重要的是,你要明白展示组件和容器组件之间的区别不是技术上的区别,相反,这是技术上的区别.
通过对比,这里有一些相关的(但是不一样的!)技术性区别:

- Stateful & Stateless:
有些组件有时候会调用`setState()`方法,有些组件则不会. **容器状态倾向于有状态的,展示组件倾向于无状态的**,这不是一个硬性的规定. 展示组件可以有状态,容器组件也可以无状态.

- Classes & Functional:
组件可以使用`class`和`functional`两种方式来声明, 函数式组件定义会比简单,但是会缺少一些只能在类组件中可用的特性,比如`state`.这些限制中的一些可能会在以后去掉,但是现在依然是存在的.因为函数式组件代表着更容易理解,我建议你使用函数式组件,除非你需要`状态,生命周期钩子或性能优化`,这些目前只能在类式组件中可用.